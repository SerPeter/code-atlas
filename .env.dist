# Code Atlas environment variables
# Copy to .env and adjust as needed. All values shown are defaults.
# Env prefix: ATLAS_, nested with double underscores (__).

# -- Memgraph ------------------------------------------------------------------
ATLAS_MEMGRAPH__HOST=localhost
ATLAS_MEMGRAPH__PORT=7687
ATLAS_MEMGRAPH__USERNAME=
ATLAS_MEMGRAPH__PASSWORD=

# -- Redis / Valkey ------------------------------------------------------------
ATLAS_REDIS__HOST=localhost
ATLAS_REDIS__PORT=6379
ATLAS_REDIS__DB=0
ATLAS_REDIS__PASSWORD=
ATLAS_REDIS__STREAM_PREFIX=atlas

# -- Embeddings ----------------------------------------------------------------
# Default: local TEI container (no API key needed)
ATLAS_EMBEDDINGS__PROVIDER=tei
ATLAS_EMBEDDINGS__MODEL=nomic-ai/nomic-embed-code
ATLAS_EMBEDDINGS__BASE_URL=http://localhost:8080
ATLAS_EMBEDDINGS__DIMENSION=768
ATLAS_EMBEDDINGS__BATCH_SIZE=32
ATLAS_EMBEDDINGS__TIMEOUT_S=30.0
ATLAS_EMBEDDINGS__QUERY_CACHE_SIZE=128
ATLAS_EMBEDDINGS__CACHE_TTL_DAYS=7        # 0 disables Valkey caching

# -- Provider: OpenAI ----------------------------------------------------------
# ATLAS_EMBEDDINGS__PROVIDER=litellm
# ATLAS_EMBEDDINGS__MODEL=openai/text-embedding-3-small
# ATLAS_EMBEDDINGS__DIMENSION=1536
# OPENAI_API_KEY=

# -- Provider: Google Gemini ---------------------------------------------------
# ATLAS_EMBEDDINGS__PROVIDER=litellm
# ATLAS_EMBEDDINGS__MODEL=gemini/text-embedding-004
# ATLAS_EMBEDDINGS__DIMENSION=768
# GEMINI_API_KEY=

# -- Provider: Azure OpenAI ---------------------------------------------------
# ATLAS_EMBEDDINGS__PROVIDER=litellm
# ATLAS_EMBEDDINGS__MODEL=azure/my-embedding-deployment
# ATLAS_EMBEDDINGS__BASE_URL=https://<resource>.openai.azure.com
# ATLAS_EMBEDDINGS__DIMENSION=1536
# AZURE_API_KEY=
# AZURE_API_VERSION=2024-02-01

# -- Provider: Anthropic Voyage ------------------------------------------------
# ATLAS_EMBEDDINGS__PROVIDER=litellm
# ATLAS_EMBEDDINGS__MODEL=voyage/voyage-code-3
# ATLAS_EMBEDDINGS__DIMENSION=1024
# VOYAGE_API_KEY=

# -- Provider: Cohere ----------------------------------------------------------
# ATLAS_EMBEDDINGS__PROVIDER=litellm
# ATLAS_EMBEDDINGS__MODEL=cohere/embed-english-v3.0
# ATLAS_EMBEDDINGS__DIMENSION=1024
# COHERE_API_KEY=

# -- Provider: Ollama (local) --------------------------------------------------
# ATLAS_EMBEDDINGS__PROVIDER=ollama
# ATLAS_EMBEDDINGS__MODEL=nomic-embed-text
# ATLAS_EMBEDDINGS__BASE_URL=http://localhost:11434
# ATLAS_EMBEDDINGS__DIMENSION=768

# -- Search --------------------------------------------------------------------
ATLAS_SEARCH__DEFAULT_TOKEN_BUDGET=8000
ATLAS_SEARCH__MAX_TOKEN_BUDGET=32000
ATLAS_SEARCH__TOKENIZER=cl100k_base
ATLAS_SEARCH__TEST_FILTER=true
ATLAS_SEARCH__STUB_FILTER=true
ATLAS_SEARCH__GENERATED_FILTER=true
ATLAS_SEARCH__MAX_CALLER_DEPTH=1
ATLAS_SEARCH__MAX_CALLERS=10
ATLAS_SEARCH__MAX_SIBLINGS=5
ATLAS_SEARCH__RRF_K=60

# -- Indexing ------------------------------------------------------------------
ATLAS_INDEX__DELTA_THRESHOLD=0.3
ATLAS_INDEX__STALE_MODE=warn              # warn | lock | ignore

# -- Watcher -------------------------------------------------------------------
ATLAS_WATCHER__DEBOUNCE_S=5.0
ATLAS_WATCHER__MAX_WAIT_S=30.0

# -- Monorepo ------------------------------------------------------------------
ATLAS_MONOREPO__AUTO_DETECT=true
